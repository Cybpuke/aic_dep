Perfect ‚Äî thanks for the screenshot. You‚Äôre in a clean state now and this is exactly the right moment to do it properly.

You want Docker installed and ALL Docker storage under /mnt/data (not /, not /var).

Below is the correct, minimal, safe procedure for RHEL / Rocky / Alma / CentOS-like systems.

‚úÖ Install Docker using /mnt/data as storage (clean & correct)
0Ô∏è‚É£ Preconditions (based on your screenshot)

/mnt/data exists and has plenty of space ‚úÖ

No running Kubernetes / RKE2 / containerd you care about ‚úÖ

Root filesystem / is small ‚Üí must not be used for Docker ‚úÖ

1Ô∏è‚É£ Install Docker (official repo)
sudo yum remove -y docker docker-ce docker-ce-cli docker-engine containerd.io || true

sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

sudo yum install -y docker-ce docker-ce-cli containerd.io


‚ö†Ô∏è Do NOT start Docker yet

2Ô∏è‚É£ Configure Docker to use /mnt/data/docker

This is the most important step.

sudo mkdir -p /mnt/data/docker
sudo mkdir -p /etc/docker

cat <<'EOF' | sudo tee /etc/docker/daemon.json
{
  "data-root": "/mnt/data/docker",
  "storage-driver": "overlay2"
}
EOF


Fix permissions:

sudo chmod 600 /etc/docker/daemon.json

3Ô∏è‚É£ Make sure /mnt/data is mounted at boot (IMPORTANT)

Check:

mount | grep /mnt/data


If it‚Äôs not in /etc/fstab, add it (example for /dev/sdb):

sudo blkid /dev/sdb


Then:

sudo vi /etc/fstab


Add (adjust UUID):

UUID=xxxx-xxxx  /mnt/data  ext4  defaults  0  2


Test:

sudo mount -a

4Ô∏è‚É£ Start Docker
sudo systemctl daemon-reload
sudo systemctl enable docker
sudo systemctl start docker

5Ô∏è‚É£ VERIFY (this must be correct)
docker info | grep "Docker Root Dir"

‚úÖ REQUIRED OUTPUT
Docker Root Dir: /mnt/data/docker


If you see /var/lib/docker ‚Üí STOP, something is wrong.

6Ô∏è‚É£ Test with a large image (real proof)
docker pull ollama/ollama:latest


Then:

df -h / /mnt/data

‚úÖ Correct behavior

/mnt/data usage increases

/ stays mostly unchanged

NO /var/lib/containerd errors

7Ô∏è‚É£ (Optional) Docker Compose
sudo yum install -y docker-compose-plugin
docker compose version

üß† Why this works (short explanation)

Docker always uses containerd internally ‚Üí that‚Äôs normal

What you removed earlier was external/system containerd

data-root forces all layers, images, volumes to /mnt/data

OverlayFS works fine on /mnt/data

If anything fails, send me ONLY this:
cat /etc/docker/daemon.json
docker info
df -h / /mnt/data


I‚Äôll fix it in one reply.

You‚Äôre finally setting this up the right way üëç
